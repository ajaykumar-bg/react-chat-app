"use strict";(self.webpackChunkreact_chat_app=self.webpackChunkreact_chat_app||[]).push([[446],{9446:(e,t,s)=>{s.r(t),s.d(t,{default:()=>we});var a=s(5043),n=s(3969),r=s(4799),o=s(3089),i=s(267),l=s(9032),d=s(3699),c=s(4527),m=s(5315),p=s(5895),u=s(3745),h=s(1863),x=s(7873),g=s(2579),y=s(2950),w=s(2043);const f=[{id:1,name:"Alice Johnson",avatar:"https://i.pravatar.cc/150?img=1",status:"online",lastSeen:new Date,lastMessage:"Hey there! How are you doing?",lastMessageTime:new Date(Date.now()-3e5),unreadCount:2},{id:2,name:"Bob Smith",avatar:"https://i.pravatar.cc/150?img=2",status:"offline",lastSeen:new Date(Date.now()-18e5),lastMessage:"Thanks for your help!",lastMessageTime:new Date(Date.now()-72e5),unreadCount:0},{id:3,name:"Carol Davis",avatar:"https://i.pravatar.cc/150?img=3",status:"online",lastSeen:new Date,lastMessage:"Can we schedule a meeting?",lastMessageTime:new Date(Date.now()-9e5),unreadCount:1},{id:4,name:"David Wilson",avatar:"https://i.pravatar.cc/150?img=4",status:"away",lastSeen:new Date(Date.now()-6e5),lastMessage:"See you tomorrow!",lastMessageTime:new Date(Date.now()-27e5),unreadCount:0},{id:5,name:"Eva Brown",avatar:"https://i.pravatar.cc/150?img=5",status:"online",lastSeen:new Date,lastMessage:"Perfect! Let me know when you're ready.",lastMessageTime:new Date(Date.now()-6e4),unreadCount:3},{id:6,name:"Frank Miller",avatar:"https://i.pravatar.cc/150?img=6",status:"online",lastSeen:new Date,lastMessage:"Just saw your message, will reply soon!",lastMessageTime:new Date(Date.now()-48e4),unreadCount:1},{id:7,name:"Grace Chen",avatar:"https://i.pravatar.cc/150?img=7",status:"away",lastSeen:new Date(Date.now()-12e5),lastMessage:"Looking forward to the weekend!",lastMessageTime:new Date(Date.now()-108e5),unreadCount:0},{id:8,name:"Henry Adams",avatar:"https://i.pravatar.cc/150?img=8",status:"offline",lastSeen:new Date(Date.now()-72e5),lastMessage:"Thanks for the update! \ud83d\udc4d",lastMessageTime:new Date(Date.now()-144e5),unreadCount:0},{id:9,name:"Isabella Rodriguez",avatar:"https://i.pravatar.cc/150?img=9",status:"online",lastSeen:new Date,lastMessage:"Can you check the latest document?",lastMessageTime:new Date(Date.now()-15e5),unreadCount:2},{id:10,name:"Jack Thompson",avatar:"https://i.pravatar.cc/150?img=11",status:"away",lastSeen:new Date(Date.now()-9e5),lastMessage:"Great work on the project! \ud83c\udf89",lastMessageTime:new Date(Date.now()-216e5),unreadCount:0},{id:11,name:"Kelly Wang",avatar:"https://i.pravatar.cc/150?img=12",status:"online",lastSeen:new Date,lastMessage:"Meeting rescheduled to 3 PM",lastMessageTime:new Date(Date.now()-21e5),unreadCount:1},{id:12,name:"Leo Garcia",avatar:"https://i.pravatar.cc/150?img=13",status:"offline",lastSeen:new Date(Date.now()-288e5),lastMessage:"Have a great day everyone!",lastMessageTime:new Date(Date.now()-864e5),unreadCount:0}],A={1:[{id:1,senderId:1,text:"Hey there! How are you doing?",timestamp:new Date(Date.now()-72e5),type:"text",status:"read"},{id:2,senderId:"me",text:"Hi Alice! I'm doing great, thanks for asking. How about you?",timestamp:new Date(Date.now()-54e5),type:"text",status:"read"},{id:3,senderId:1,text:"I'm doing well too! Just finished a big project at work.",timestamp:new Date(Date.now()-36e5),type:"text",status:"read"},{id:4,senderId:"me",text:"Congratulations! That sounds exciting.",timestamp:new Date(Date.now()-18e5),type:"text",status:"read"},{id:5,senderId:1,text:"Thanks! Want to grab coffee sometime this week?",timestamp:new Date(Date.now()-3e5),type:"text",status:"delivered"}],2:[{id:6,senderId:"me",text:"Hey Bob, could you help me with that report?",timestamp:new Date(Date.now()-108e5),type:"text",status:"read"},{id:7,senderId:2,text:"Of course! I'll send it over in a few minutes.",timestamp:new Date(Date.now()-9e6),type:"text",status:"read"},{id:8,senderId:2,text:"Thanks for your help!",timestamp:new Date(Date.now()-72e5),type:"text",status:"read"}],3:[{id:9,senderId:3,text:"Can we schedule a meeting?",timestamp:new Date(Date.now()-9e5),type:"text",status:"delivered"}],4:[{id:10,senderId:4,text:"Great meeting today! Thanks everyone.",timestamp:new Date(Date.now()-36e5),type:"text",status:"read"},{id:11,senderId:"me",text:"Agreed! Very productive.",timestamp:new Date(Date.now()-3e6),type:"text",status:"read"},{id:12,senderId:4,text:"See you tomorrow!",timestamp:new Date(Date.now()-27e5),type:"text",status:"read"}],5:[{id:13,senderId:"me",text:"Eva, are you ready for the presentation?",timestamp:new Date(Date.now()-6e5),type:"text",status:"read"},{id:14,senderId:5,text:"Almost! Just finishing up the final slides.",timestamp:new Date(Date.now()-3e5),type:"text",status:"read"},{id:15,senderId:5,text:"Perfect! Let me know when you're ready.",timestamp:new Date(Date.now()-6e4),type:"text",status:"delivered"}],6:[{id:16,senderId:"me",text:"Frank, did you get a chance to review the proposal?",timestamp:new Date(Date.now()-72e5),type:"text",status:"read"},{id:17,senderId:6,text:"Yes! It looks really good. I have a few minor suggestions.",timestamp:new Date(Date.now()-54e5),type:"text",status:"read"},{id:18,senderId:"me",text:"Great! Feel free to share them whenever you have time.",timestamp:new Date(Date.now()-36e5),type:"text",status:"read"},{id:19,senderId:6,text:"Just saw your message, will reply soon!",timestamp:new Date(Date.now()-48e4),type:"text",status:"delivered"}],7:[{id:20,senderId:7,text:"Hey! How was your weekend?",timestamp:new Date(Date.now()-144e5),type:"text",status:"read"},{id:21,senderId:"me",text:"It was great! Went hiking and had some relaxing time.",timestamp:new Date(Date.now()-126e5),type:"text",status:"read"},{id:22,senderId:7,text:"Looking forward to the weekend!",timestamp:new Date(Date.now()-108e5),type:"text",status:"read"}],8:[{id:23,senderId:"me",text:"Henry, I just sent you the quarterly report.",timestamp:new Date(Date.now()-18e6),type:"text",status:"read"},{id:24,senderId:8,text:"Thanks for the update! \ud83d\udc4d",timestamp:new Date(Date.now()-144e5),type:"text",status:"read"},{id:25,senderId:8,text:"The numbers look really promising this quarter.",timestamp:new Date(Date.now()-144e5),type:"text",status:"read"}],9:[{id:26,senderId:9,text:"Hi! I uploaded the new design mockups.",timestamp:new Date(Date.now()-36e5),type:"text",status:"read"},{id:27,senderId:"me",text:"Awesome! I'll take a look at them shortly.",timestamp:new Date(Date.now()-3e6),type:"text",status:"read"},{id:28,senderId:9,text:"Can you check the latest document?",timestamp:new Date(Date.now()-15e5),type:"text",status:"delivered"},{id:29,senderId:9,text:"I made some changes based on our discussion.",timestamp:new Date(Date.now()-15e5),type:"text",status:"delivered"}],10:[{id:30,senderId:10,text:"The client presentation went really well!",timestamp:new Date(Date.now()-252e5),type:"text",status:"read"},{id:31,senderId:"me",text:"That's fantastic news! What was their feedback?",timestamp:new Date(Date.now()-234e5),type:"text",status:"read"},{id:32,senderId:10,text:"Great work on the project! \ud83c\udf89",timestamp:new Date(Date.now()-216e5),type:"text",status:"read"}],11:[{id:33,senderId:11,text:"Good morning! Ready for today's sprint planning?",timestamp:new Date(Date.now()-72e5),type:"text",status:"read"},{id:34,senderId:"me",text:"Yes! I have all my tasks prepared.",timestamp:new Date(Date.now()-54e5),type:"text",status:"read"},{id:35,senderId:11,text:"Meeting rescheduled to 3 PM",timestamp:new Date(Date.now()-21e5),type:"text",status:"delivered"}],12:[{id:36,senderId:12,text:"Thanks for organizing the team lunch yesterday!",timestamp:new Date(Date.now()-864e5),type:"text",status:"read"},{id:37,senderId:"me",text:"My pleasure! It was great to catch up with everyone.",timestamp:new Date(Date.now()-864e5),type:"text",status:"read"},{id:38,senderId:12,text:"Have a great day everyone!",timestamp:new Date(Date.now()-864e5),type:"text",status:"read"}]},v={id:"me",name:"You",avatar:"https://i.pravatar.cc/150?img=10",status:"online"};var b=s(579);const D=()=>{const e=(0,i.A)();return(0,b.jsxs)(n.A,{sx:{p:2,bgcolor:e.palette.primary.main,color:e.palette.primary.contrastText,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,b.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,b.jsx)(h.A,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:(0,b.jsx)(n.A,{sx:{width:12,height:12,borderRadius:"50%",bgcolor:"#4caf50",border:"2px solid ".concat(e.palette.primary.main)}}),children:(0,b.jsx)(x.A,{src:v.avatar,alt:v.name,sx:{width:40,height:40}})}),(0,b.jsx)(p.A,{variant:"h6",fontWeight:"medium",children:"Chats"})]}),(0,b.jsxs)(n.A,{sx:{display:"flex",alignItems:"center"},children:[(0,b.jsx)(g.A,{size:"small",sx:{color:"inherit",mr:.5},children:(0,b.jsx)(y.A,{})}),(0,b.jsx)(g.A,{size:"small",sx:{color:"inherit"},children:(0,b.jsx)(w.A,{})})]})]})};var C=s(2455),k=s(4244),j=s(6185),I=s(3759),S=s(8344),T=s(4749),M=s(9172),E=s(8869);const R=e=>(0,S.c)(e)?(0,T.GP)(e,"HH:mm"):(0,M.P)(e)?"Yesterday":(0,T.GP)(e,"dd/MM/yyyy"),U=e=>{const t=(0,E.o)(new Date,e);if(t<1)return"Just now";if(t<60)return"".concat(t," minute").concat(t>1?"s":""," ago");if(t<1440){const e=Math.floor(t/60);return"".concat(e," hour").concat(e>1?"s":""," ago")}return(0,T.GP)(e,"dd/MM/yyyy HH:mm")},z=e=>{switch(e){case"online":return"#4caf50";case"away":return"#ff9800";default:return"#9e9e9e"}},W=e=>{let{user:t,isSelected:s,onClick:a}=e;const r=(0,i.A)();return(0,b.jsxs)(C.Ay,{component:"button",onClick:a,selected:s,sx:{py:1.5,px:2,borderBottom:"1px solid ".concat(r.palette.divider),bgcolor:s?r.palette.action.selected:"transparent","&:hover":{bgcolor:s?r.palette.action.selected:r.palette.action.hover},cursor:"pointer",border:"none",width:"100%",textAlign:"left"},children:[(0,b.jsx)(k.A,{children:(0,b.jsx)(h.A,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:(0,b.jsx)(n.A,{sx:{width:12,height:12,borderRadius:"50%",bgcolor:z(t.status),border:"2px solid ".concat(r.palette.background.paper)}}),children:(0,b.jsx)(x.A,{src:t.avatar,alt:t.name,sx:{width:50,height:50}})})}),(0,b.jsx)(j.A,{primary:(0,b.jsxs)(n.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:.5},children:[(0,b.jsx)(p.A,{variant:"subtitle1",fontWeight:t.unreadCount>0?"bold":"medium",color:s?"primary":"textPrimary",noWrap:!0,children:t.name}),(0,b.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[t.unreadCount>0&&(0,b.jsx)(I.A,{label:t.unreadCount,size:"small",color:"primary",sx:{height:20,minWidth:20,"& .MuiChip-label":{fontSize:"0.75rem",px:1}}}),(0,b.jsx)(p.A,{variant:"caption",color:"textSecondary",children:R(t.lastMessageTime)})]})]}),secondary:(0,b.jsx)(p.A,{variant:"body2",color:"textSecondary",noWrap:!0,fontWeight:t.unreadCount>0?"medium":"normal",children:t.lastMessage}),sx:{m:0}})]})},_=e=>{let{users:t,selectedUser:s,searchTerm:a,onUserSelect:r,onSearchChange:o}=e;const h=(0,i.A)(),x=((e,t)=>t.trim()?e.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())):e)(t,a);return(0,b.jsxs)(n.A,{sx:{height:"100%",display:"flex",flexDirection:"column",bgcolor:h.palette.background.paper},children:[(0,b.jsx)(D,{}),(0,b.jsx)(n.A,{sx:{p:2,pb:1},children:(0,b.jsx)(l.A,{fullWidth:!0,variant:"outlined",placeholder:"Search conversations...",value:a,onChange:e=>o(e.target.value),size:"small",InputProps:{startAdornment:(0,b.jsx)(d.A,{position:"start",children:(0,b.jsx)(u.A,{color:"action"})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:3,bgcolor:h.palette.action.hover}}})}),(0,b.jsx)(c.A,{}),(0,b.jsx)(n.A,{sx:{flex:1,overflow:"auto"},children:x.length>0?(0,b.jsx)(m.A,{sx:{p:0},children:x.map(e=>(0,b.jsx)(W,{user:e,isSelected:(null===s||void 0===s?void 0:s.id)===e.id,onClick:()=>r(e)},e.id))}):(0,b.jsx)(n.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",p:2},children:(0,b.jsx)(p.A,{variant:"body2",color:"textSecondary",align:"center",children:"No conversations found"})})})]})};var H=s(3241),G=s(4451);const O=e=>{let{user:t}=e;const s=(0,i.A)();return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)(n.A,{sx:{p:2,bgcolor:s.palette.background.paper,display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:"1px solid ".concat(s.palette.divider)},children:[(0,b.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:2},children:[(0,b.jsx)(h.A,{overlap:"circular",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:(0,b.jsx)(n.A,{sx:{width:10,height:10,borderRadius:"50%",bgcolor:z(t.status),border:"2px solid ".concat(s.palette.background.paper)}}),children:(0,b.jsx)(x.A,{src:t.avatar,alt:t.name,sx:{width:45,height:45}})}),(0,b.jsxs)(n.A,{children:[(0,b.jsx)(p.A,{variant:"h6",fontWeight:"medium",children:t.name}),(0,b.jsx)(p.A,{variant:"caption",color:"textSecondary",children:"online"===t.status?"Online":"Last seen ".concat(U(t.lastSeen))})]})]}),(0,b.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,b.jsx)(g.A,{size:"small",color:"primary",children:(0,b.jsx)(u.A,{})}),(0,b.jsx)(g.A,{size:"small",color:"primary",children:(0,b.jsx)(H.A,{})}),(0,b.jsx)(g.A,{size:"small",color:"primary",children:(0,b.jsx)(G.A,{})}),(0,b.jsx)(g.A,{size:"small",children:(0,b.jsx)(w.A,{})})]})]})})};var P=s(7496),L=s(7937),B=s(190);const Y=e=>{let{message:t,showAvatar:s,showTimestamp:a,isGrouped:o}=e;const l=(0,i.A)(),d="me"===t.senderId,c=d?v:f.find(e=>e.id===t.senderId);return(0,b.jsxs)(n.A,{sx:{display:"flex",justifyContent:d?"flex-end":"flex-start",mb:o?.5:1.5,alignItems:"flex-end"},children:[!d&&(0,b.jsx)(x.A,{src:null===c||void 0===c?void 0:c.avatar,alt:null===c||void 0===c?void 0:c.name,sx:{width:32,height:32,mr:1,visibility:s?"visible":"hidden"}}),(0,b.jsxs)(n.A,{sx:{maxWidth:"70%",display:"flex",flexDirection:"column",alignItems:d?"flex-end":"flex-start"},children:[a&&(0,b.jsx)(p.A,{variant:"caption",color:"textSecondary",sx:{mb:.5,mx:1,textAlign:d?"right":"left"},children:R(t.timestamp)}),(0,b.jsxs)(r.A,{elevation:1,sx:{p:1.5,bgcolor:d?l.palette.primary.main:l.palette.background.paper,color:d?l.palette.primary.contrastText:l.palette.text.primary,borderRadius:2,borderTopLeftRadius:!d&&o?.5:2,borderTopRightRadius:d&&o?.5:2,borderBottomLeftRadius:!d&&s?.5:2,borderBottomRightRadius:d&&s?.5:2,position:"relative",wordWrap:"break-word"},children:[(0,b.jsx)(p.A,{variant:"body2",children:t.text}),(0,b.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end",mt:.5,gap:.5},children:[(0,b.jsx)(p.A,{variant:"caption",sx:{fontSize:"0.7rem",color:d?l.palette.primary.contrastText:l.palette.text.secondary,opacity:.8},children:R(t.timestamp)}),(()=>{if(!d)return null;switch(t.status){case"sent":return(0,b.jsx)(P.A,{sx:{fontSize:14,color:l.palette.text.secondary}});case"delivered":return(0,b.jsx)(L.A,{sx:{fontSize:14,color:l.palette.text.secondary}});case"read":return(0,b.jsx)(B.A,{sx:{fontSize:14,color:l.palette.primary.main}});default:return null}})()]})]})]})]})},J=e=>{let{user:t}=e;const s=(0,i.A)();return(0,b.jsxs)(n.A,{sx:{display:"flex",alignItems:"flex-end",mb:1,animation:"fadeIn 0.3s ease-in-out","@keyframes fadeIn":{from:{opacity:0,transform:"translateY(10px)"},to:{opacity:1,transform:"translateY(0)"}}},children:[(0,b.jsx)(x.A,{src:null===t||void 0===t?void 0:t.avatar,alt:null===t||void 0===t?void 0:t.name,sx:{width:32,height:32,mr:1}}),(0,b.jsxs)(n.A,{sx:{bgcolor:s.palette.background.paper,borderRadius:2,px:2,py:1,display:"flex",alignItems:"center",gap:.5,boxShadow:1},children:[(0,b.jsxs)(p.A,{variant:"body2",color:"textSecondary",children:[null===t||void 0===t?void 0:t.name," is typing"]}),(0,b.jsx)(n.A,{sx:{display:"flex",gap:.25},children:[1,2,3].map(e=>(0,b.jsx)(n.A,{sx:{width:4,height:4,borderRadius:"50%",bgcolor:s.palette.text.secondary,animation:"typing 1.4s ease-in-out ".concat(.2*e,"s infinite"),"@keyframes typing":{"0%, 60%, 100%":{transform:"translateY(0)",opacity:.5},"30%":{transform:"translateY(-6px)",opacity:1}}}},e))})]})]})},N=e=>{let{messages:t,selectedUser:s,isTyping:r}=e;const o=(0,i.A)(),l=(0,a.useRef)(null);return(0,a.useEffect)(()=>{(()=>{var e;null===(e=l.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})})()},[t]),(0,b.jsx)(n.A,{sx:{flex:1,overflow:"auto",p:2,bgcolor:"dark"===o.palette.mode?o.palette.grey[900]:o.palette.grey[50],backgroundImage:"dark"===o.palette.mode?"none":'url("data:image/svg+xml,%3Csvg width="60" height="60" viewBox="0 0 60 60" xmlns="http://www.w3.org/2000/svg"%3E%3Cg fill="none" fill-rule="evenodd"%3E%3Cg fill="%23f0f0f0" fill-opacity="0.1"%3E%3Ccircle cx="30" cy="30" r="2"/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")'},children:0===t.length?(0,b.jsx)(n.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:o.palette.text.secondary},children:"No messages yet. Start the conversation!"}):(0,b.jsxs)(b.Fragment,{children:[t.map((e,s)=>{const a=0===s,n=s===t.length-1,r=a?null:t[s-1],o=n?null:t[s+1],i=(null===r||void 0===r?void 0:r.senderId)===e.senderId,l=(null===o||void 0===o?void 0:o.senderId)===e.senderId;return(0,b.jsx)(Y,{message:e,showAvatar:!l||n,showTimestamp:!i||a,isGrouped:i},e.id)}),r&&s&&(0,b.jsx)(J,{user:s}),(0,b.jsx)("div",{ref:l})]})})};var F=s(2058),K=s(6253),q=s(7171);const V=e=>{let{onSendMessage:t}=e;const s=(0,i.A)(),[o,d]=(0,a.useState)(""),c=()=>{o.trim()&&(t(o),d(""))};return(0,b.jsx)(r.A,{elevation:0,sx:{p:2,bgcolor:s.palette.background.paper,borderTop:"1px solid ".concat(s.palette.divider)},children:(0,b.jsxs)(n.A,{sx:{display:"flex",alignItems:"flex-end",gap:1},children:[(0,b.jsx)(g.A,{size:"small",color:"primary",sx:{mb:.5},children:(0,b.jsx)(F.A,{})}),(0,b.jsx)(l.A,{fullWidth:!0,multiline:!0,maxRows:4,variant:"outlined",placeholder:"Type a message...",value:o,onChange:e=>d(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),c())},size:"small",sx:{"& .MuiOutlinedInput-root":{borderRadius:3,bgcolor:s.palette.action.hover,"& fieldset":{border:"1px solid ".concat(s.palette.divider)},"&:hover fieldset":{borderColor:s.palette.primary.main},"&.Mui-focused fieldset":{borderColor:s.palette.primary.main}}}}),(0,b.jsx)(g.A,{size:"small",color:"primary",sx:{mb:.5},children:(0,b.jsx)(K.A,{})}),(0,b.jsx)(g.A,{size:"small",color:"primary",onClick:c,disabled:!o.trim(),sx:{mb:.5,bgcolor:o.trim()?s.palette.primary.main:"transparent",color:o.trim()?s.palette.primary.contrastText:"inherit","&:hover":{bgcolor:o.trim()?s.palette.primary.dark:s.palette.action.hover}},children:(0,b.jsx)(q.A,{})})]})})},Q=e=>{let{selectedUser:t,messages:s,onSendMessage:a,isTyping:o}=e;const l=(0,i.A)();return t?(0,b.jsxs)(n.A,{sx:{height:"100%",display:"flex",flexDirection:"column",bgcolor:l.palette.background.default},children:[(0,b.jsx)(O,{user:t}),(0,b.jsxs)(n.A,{sx:{flex:1,overflow:"hidden",display:"flex",flexDirection:"column"},children:[(0,b.jsx)(N,{messages:s,selectedUser:t,isTyping:o}),(0,b.jsx)(V,{onSendMessage:a})]})]}):(0,b.jsx)(n.A,{sx:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",bgcolor:l.palette.background.default},children:(0,b.jsxs)(r.A,{elevation:0,sx:{p:4,textAlign:"center",bgcolor:"transparent"},children:[(0,b.jsx)(p.A,{variant:"h5",color:"textSecondary",gutterBottom:!0,children:"Welcome to Chat"}),(0,b.jsx)(p.A,{variant:"body1",color:"textSecondary",children:"Select a conversation to start messaging"})]})})};var X=s(4992),Z=s(5463);const $=e=>{let{isConnected:t}=e;return(0,b.jsx)(n.A,{sx:{position:"absolute",top:8,right:8,zIndex:1e3},children:(0,b.jsx)(I.A,{icon:t?(0,b.jsx)(X.A,{}):(0,b.jsx)(Z.A,{}),label:t?"Connected":"Offline",color:t?"success":"error",variant:"outlined",size:"small",sx:{bgcolor:"background.paper","& .MuiChip-icon":{color:t?"success.main":"error.main"}}})})};var ee=s(9379),te=s(2104);const se=new class{constructor(){this.socket=null,this.isConnected=!1,this.messageCallbacks=[],this.statusCallbacks=[],this.connectionCallbacks=[]}connect(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ws://localhost:3001";try{this.socket=(0,te.io)(e,{autoConnect:!1,reconnection:!0,reconnectionDelay:1e3,reconnectionAttempts:5,timeout:2e4}),this.setupEventListeners(),this.socket.connect()}catch(t){console.error("WebSocket connection failed:",t),this.simulateConnection()}}setupEventListeners(){this.socket&&(this.socket.on("connect",()=>{console.log("Connected to WebSocket server"),this.isConnected=!0,this.notifyConnectionCallbacks(!0)}),this.socket.on("disconnect",()=>{console.log("Disconnected from WebSocket server"),this.isConnected=!1,this.notifyConnectionCallbacks(!1)}),this.socket.on("message",e=>{this.notifyMessageCallbacks(e)}),this.socket.on("messageStatus",e=>{this.notifyStatusCallbacks(e)}),this.socket.on("userTyping",e=>{console.log("User typing:",e)}),this.socket.on("userOnline",e=>{console.log("User online:",e)}),this.socket.on("userOffline",e=>{console.log("User offline:",e)}))}simulateConnection(){setTimeout(()=>{console.log("Simulating WebSocket connection"),this.isConnected=!0,this.notifyConnectionCallbacks(!0),setTimeout(()=>{this.simulateIncomingMessage()},5e3)},1e3)}simulateIncomingMessage(){const e={id:Date.now(),senderId:1,text:"This is a simulated WebSocket message!",timestamp:new Date,type:"text",status:"delivered"};this.notifyMessageCallbacks(e)}sendMessage(e){this.socket&&this.isConnected?this.socket.emit("sendMessage",e):(console.log("WebSocket not connected, message not sent:",e),setTimeout(()=>{this.notifyStatusCallbacks({messageId:e.id,status:"delivered"})},1e3))}joinRoom(e){this.socket&&this.isConnected&&this.socket.emit("joinRoom",e)}leaveRoom(e){this.socket&&this.isConnected&&this.socket.emit("leaveRoom",e)}sendTyping(e,t){this.socket&&this.isConnected&&this.socket.emit("typing",{recipientId:e,isTyping:t})}onMessage(e){return this.messageCallbacks.push(e),()=>{const t=this.messageCallbacks.indexOf(e);t>-1&&this.messageCallbacks.splice(t,1)}}onMessageStatus(e){return this.statusCallbacks.push(e),()=>{const t=this.statusCallbacks.indexOf(e);t>-1&&this.statusCallbacks.splice(t,1)}}onConnection(e){return this.connectionCallbacks.push(e),()=>{const t=this.connectionCallbacks.indexOf(e);t>-1&&this.connectionCallbacks.splice(t,1)}}notifyMessageCallbacks(e){this.messageCallbacks.forEach(t=>{try{t(e)}catch(s){console.error("Error in message callback:",s)}})}notifyStatusCallbacks(e){this.statusCallbacks.forEach(t=>{try{t(e)}catch(s){console.error("Error in status callback:",s)}})}notifyConnectionCallbacks(e){this.connectionCallbacks.forEach(t=>{try{t(e)}catch(s){console.error("Error in connection callback:",s)}})}disconnect(){this.socket&&(this.socket.disconnect(),this.socket=null),this.isConnected=!1,this.messageCallbacks=[],this.statusCallbacks=[],this.connectionCallbacks=[]}getConnectionStatus(){return this.isConnected}},ae={users:[],messages:{},selectedUser:null,isConnected:!1,isTyping:{},searchTerm:""},ne="SET_USERS",re="SET_MESSAGES",oe="ADD_MESSAGE",ie="UPDATE_MESSAGE_STATUS",le="SELECT_USER",de="SET_CONNECTION_STATUS",ce="SET_TYPING_STATUS",me="SET_SEARCH_TERM",pe="UPDATE_USER_LAST_MESSAGE",ue="MARK_MESSAGES_AS_READ",he=(e,t)=>{switch(t.type){case ne:return(0,ee.A)((0,ee.A)({},e),{},{users:t.payload});case re:return(0,ee.A)((0,ee.A)({},e),{},{messages:t.payload});case oe:const{userId:s,message:a}=t.payload;return(0,ee.A)((0,ee.A)({},e),{},{messages:(0,ee.A)((0,ee.A)({},e.messages),{},{[s]:[...e.messages[s]||[],a]})});case ie:const{messageId:n,status:r}=t.payload,o=(0,ee.A)({},e.messages);return Object.keys(o).forEach(e=>{o[e]=o[e].map(e=>e.id===n?(0,ee.A)((0,ee.A)({},e),{},{status:r}):e)}),(0,ee.A)((0,ee.A)({},e),{},{messages:o});case le:return(0,ee.A)((0,ee.A)({},e),{},{selectedUser:t.payload});case de:return(0,ee.A)((0,ee.A)({},e),{},{isConnected:t.payload});case ce:return(0,ee.A)((0,ee.A)({},e),{},{isTyping:(0,ee.A)((0,ee.A)({},e.isTyping),{},{[t.payload.userId]:t.payload.isTyping})});case me:return(0,ee.A)((0,ee.A)({},e),{},{searchTerm:t.payload});case pe:const{userId:i,lastMessage:l,lastMessageTime:d}=t.payload;return(0,ee.A)((0,ee.A)({},e),{},{users:e.users.map(e=>e.id===i?(0,ee.A)((0,ee.A)({},e),{},{lastMessage:l,lastMessageTime:d}):e)});case ue:const c=t.payload;return(0,ee.A)((0,ee.A)({},e),{},{users:e.users.map(e=>e.id===c?(0,ee.A)((0,ee.A)({},e),{},{unreadCount:0}):e)});default:return e}},xe=(0,a.createContext)(),ge=e=>{let{children:t}=e;const[s,n]=(0,a.useReducer)(he,ae);(0,a.useEffect)(()=>{se.connect();const e=se.onMessage(e=>{n({type:oe,payload:{userId:e.senderId,message:e}}),n({type:pe,payload:{userId:e.senderId,lastMessage:e.text,lastMessageTime:e.timestamp}})}),t=se.onMessageStatus(e=>{n({type:ie,payload:e})}),s=se.onConnection(e=>{n({type:de,payload:e})});return()=>{e(),t(),s(),se.disconnect()}},[]);const r=(0,a.useCallback)(e=>{n({type:ne,payload:e})},[]),o=(0,a.useCallback)(e=>{n({type:re,payload:e})},[]),i=(0,a.useCallback)(e=>{if(!s.selectedUser||!e.trim())return;const t={id:Date.now(),senderId:"me",text:e,timestamp:new Date,type:"text",status:"sent"};n({type:oe,payload:{userId:s.selectedUser.id,message:t}}),n({type:pe,payload:{userId:s.selectedUser.id,lastMessage:e,lastMessageTime:new Date}}),se.sendMessage((0,ee.A)((0,ee.A)({},t),{},{recipientId:s.selectedUser.id}))},[s.selectedUser]),l=(0,a.useCallback)(e=>{n({type:le,payload:e}),e&&n({type:ue,payload:e.id})},[]),d=(0,a.useCallback)(e=>{n({type:me,payload:e})},[]),c=(0,a.useCallback)((e,t)=>{n({type:ce,payload:{userId:e,isTyping:t}}),se.sendTyping(e,t)},[]),m=(0,ee.A)((0,ee.A)({},s),{},{setUsers:r,setMessages:o,sendMessage:i,selectUser:l,setSearchTerm:d,setTypingStatus:c});return(0,b.jsx)(xe.Provider,{value:m,children:t})},ye=()=>{const e=(0,i.A)(),{users:t,selectedUser:s,messages:l,searchTerm:d,isTyping:c,isConnected:m,setUsers:p,setMessages:u,selectUser:h,sendMessage:x,setSearchTerm:g}=(()=>{const e=(0,a.useContext)(xe);if(!e)throw new Error("useChat must be used within a ChatProvider");return e})();return(0,a.useEffect)(()=>{0===t.length&&(p((e=>[...e].sort((e,t)=>new Date(t.lastMessageTime)-new Date(e.lastMessageTime)))(f)),u(A),f.length>0&&h(f[0]))},[t.length,p,u,h]),(0,b.jsxs)(n.A,{sx:{height:"calc(100vh - 120px)",position:"relative"},children:[(0,b.jsx)($,{isConnected:m}),(0,b.jsx)(r.A,{elevation:3,sx:{height:"100%",overflow:"hidden"},children:(0,b.jsxs)(o.A,{container:!0,sx:{height:"100%"},children:[(0,b.jsx)(o.A,{size:{xs:12,md:4,lg:3},sx:{borderRight:"1px solid ".concat(e.palette.divider),height:"100%"},children:(0,b.jsx)(_,{users:t,selectedUser:s,searchTerm:d,onUserSelect:h,onSearchChange:g})}),(0,b.jsx)(o.A,{size:{xs:12,md:8,lg:9},sx:{height:"100%"},children:(0,b.jsx)(Q,{selectedUser:s,messages:l[null===s||void 0===s?void 0:s.id]||[],onSendMessage:x,isTyping:c[null===s||void 0===s?void 0:s.id]||!1})})]})})]})},we=()=>(0,b.jsx)(ge,{children:(0,b.jsx)(ye,{})})}}]);
//# sourceMappingURL=446.cb90ca86.chunk.js.map